<div *ngIf="isLoaded" id="contact-modal">
  <header class="nav-header pad1">
      <div class="clearfix">
          <a (click)="this.exit()" class="btn btn-back btn-secondary-outline btn-sm" title="Close Record">
              <i class="fa fa-times"></i>
          </a>
          <h1 id="pageTitle">{{this.title}}</h1>
      </div>
  </header>
  <div *ngIf="this.participant" class="app-content">
      <div class="wrapper">

          <div id="disenrollment" name="disenrollment" class="pad1-0 twothird center">
              <div class="pad2">&nbsp;</div>

              <div class="row control-group">
                  <div class="col-md-8">
                      <label>Program</label>
                      <app-select [(ngModel)]="this.selectedProgramName" (ngModelChange)="this.selectedProgramName = $event; this.programChange(); this.validate();"
                          [isIdString]="true" [cacheInnerValue]="this.originalSelectedProgramName" [isInvalid]="modelErrors['selectedProgramName']"
                          [isDisabled]="this.selectedProgramNameDisabled" [dropDownList]="this.programDrop" [isRequired]="true"></app-select>
                  </div>
                  <div *ngIf="this.model?.isDisenrollmentDateDisplayedForDisenrollment" class="col-md-4">
                      <label>Disenrollment Date</label>
                      <app-date-mm-dd-yyyy [(ngModel)]="this.model.disenrollmentDate" (ngModelChange)="this.model.disenrollmentDate= $event; this.validate();"
                          [cacheInnerValue]="this.originalModel?.disenrollmentDate" [isInvalid]="modelErrors['disenrollmentDate']"
                          [isRequired]="this.model.isDisenrollmentDateRequiredForDisenrollment"></app-date-mm-dd-yyyy>
                  </div>

              </div>

              <div class="row control-group pt-1">
                  <div *ngIf="this.model?.isCompletionReasonDisplayedForDisenrollment" class="col-md-12">
                      <label>Completion Reason</label>
                      <app-select [(ngModel)]="this.model.completionReasonId" (ngModelChange)="this.model.completionReasonId= $event; this.validate();"
                          [cacheInnerValue]="this.originalModel?.completionReasonId" [isInvalid]="modelErrors['completionReasonId']"
                          [dropDownList]="this.completionReasonsDrop" [isRequired]="this.model.isCompletionReasonRequiredForDisenrollment"></app-select>
                  </div>
              </div>

              <div class="row control-group pt-1">
                  <div *ngIf="this.model?.isDisenrollmentDetailsDisplayedForDisenrollment" class="col-md-12">
                      <app-text-area [(ngModel)]="this.model.completionReasonDetails" (ngModelChange)="this.model.completionReasonDetails= $event; this.validate();"
                          [cacheInnerValue]="this.originalModel?.completionReasonDetails" [isInvalid]="modelErrors['completionReasonDetails']"
                          [isDetails]="true" [maxlength]="380" [isRequired]="this.model.isDisenrollmentDetailsRequiredForDisenrollment"></app-text-area>
                  </div>
              </div>

              <div class="flex-row py-1">
                  <app-validation-summary class="w-100" [errors]="validationManager.errors"></app-validation-summary>
              </div>

              <div class="row control-group">
                  <div class="col-md-12">
                      <label>&nbsp;</label>
                      <ul *ngIf="this.disenrollmentEligibility == null" class="list-group">
                          <li></li>
                      </ul>
                      <ul *ngIf="this.disenrollmentEligibility?.status === true" class="list-group">
                          <li class="list-group-item list-group-item-success">Participant is eligible for disenrollment</li>
                      </ul>
                      <ul *ngIf="this.disenrollmentEligibility?.errors != null" class="list-group">
                          <li *ngFor="let error of this.disenrollmentEligibility.errors" class="list-group-item list-group-item-danger">{{error}}</li>
                      </ul>
                      <ul *ngIf="this.disenrollmentEligibility?.warnings != null" class="list-group">
                          <li *ngFor="let warning of this.disenrollmentEligibility.warnings" class="list-group-item list-group-item-warning">{{warning}}</li>
                      </ul>
                      &nbsp;</div>
              </div>
              <div class="pad2">&nbsp;</div>
              <div class="pad2">&nbsp;</div>
          </div>

      </div>
  </div>
  <footer class="nav-footer">
      <div class="wrapper tright">
          <div class="error" *ngIf="this.preCheckError">There was an error while checking disenrollment eligibility.</div>
          <div class="error" *ngIf="this.hadSaveError">There was an error saving.</div>
          <button class="btn btn-add" (click)="this.exit()">Cancel</button>
          <button class="btn btn-primary disabled" *ngIf="isSaving">
              <i class="fa fa-circle-notch fa-spin fa-1x fa-fw"></i> Saving </button>
          <button class="btn btn-primary disabled" *ngIf="isPrecheckLoading">
              <i class="fa fa-circle-notch fa-spin fa-1x fa-fw"></i> Loading </button>
          <button (click)="this.saveAndExit()" *ngIf="!isSaving && !isPrecheckLoading" class="btn btn-primary" [class.disabled]="!this.isSaveAble"
              [disabled]="!this.isSaveAble">Disenroll</button>
      </div>
  </footer>
  <div class="progress">
      <div class="progress-bar" style="width: 25%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</div>
